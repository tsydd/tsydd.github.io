import{b as N,d as R,j as H,G as j,E as S,F as m}from"./position-engine.fb89dcac.js";import{Q as K,_ as G}from"./PresetDetailsCompact.aed62bcc.js";import{c as F,h as Y,d as J,i as U}from"./QBtn.ece7465e.js";import{c as d,h as f,g as W,r as X,w as P,ae as Z,o as ee,ad as te,a5 as ae,s as re,u as C,p as le,d as B,E as n,G as i,N as y,ah as se,af as oe,I as s,f as v,O as _,K as p,$ as g,J as M}from"./index.1bdad981.js";import{u as ne,a as ie}from"./use-virtual-scroll.60bf4501.js";import{P as L,u as ue}from"./marshallcode.68c175ff.js";const ce=["horizontal","vertical","cell","none"];var de=F({name:"QMarkupTable",props:{...N,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>ce.includes(e)}},setup(e,{slots:t}){const l=W(),r=R(e,l.proxy.$q),o=d(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(r.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>f("div",{class:o.value},[f("table",{class:"q-table"},Y(t.default))])}});function ve(e,t){return f("div",e,[f("table",{class:"q-table"},t)])}const fe={list:K,table:de},me=["list","table","__qtable"];var _e=F({name:"QVirtualScroll",props:{...ne,type:{type:String,default:"list",validator:e=>me.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:t,attrs:l}){let r;const o=X(null),a=d(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:u,localResetVirtualScroll:k,padVirtualScroll:Q,onVirtualScrollEvt:q}=ie({virtualScrollLength:a,getVirtualScrollTarget:z,getVirtualScrollEl:T}),$=d(()=>{if(a.value===0)return[];const c=(E,D)=>({index:u.value.from+D,item:E});return e.itemsFn===void 0?e.items.slice(u.value.from,u.value.to).map(c):e.itemsFn(u.value.from,u.value.to-u.value.from).map(c)}),V=d(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),I=d(()=>e.scrollTarget!==void 0?{}:{tabindex:0});P(a,()=>{k()}),P(()=>e.scrollTarget,()=>{h(),b()});function T(){return o.value.$el||o.value}function z(){return r}function b(){r=H(T(),e.scrollTarget),r.addEventListener("scroll",q,C.passive)}function h(){r!==void 0&&(r.removeEventListener("scroll",q,C.passive),r=void 0)}function x(){let c=Q(e.type==="list"?"div":"tbody",$.value.map(t.default));return t.before!==void 0&&(c=t.before().concat(c)),J(t.after,c)}return Z(()=>{k()}),ee(()=>{b()}),te(()=>{b()}),ae(()=>{h()}),re(()=>{h()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ve({ref:o,class:"q-table__middle "+V.value},x()):f(fe[e.type],{...l,ref:o,class:[l.class,V.value],...I.value},x)}}});const O="favoritePresets";function w(e){return`${e.type}-${e.id}`}const A=le("favoritePresets",{state:()=>({presets:L.getItem(O)||{}}),actions:{toggleFavorite(e){const t=w(e);if(this.presets.hasOwnProperty(t)){const{[t]:l,...r}=this.presets;this.presets=r}else this.presets={[t]:e,...this.presets}}},getters:{isFavorite(e){return t=>e.presets.hasOwnProperty(w(t))}}});A().$subscribe((e,{presets:t})=>{L.set(O,t)});const pe=B({__name:"FavoritePresetButton",props:{modelValue:{type:Object,required:!0}},setup(e){const t=A();return(l,r)=>(n(),i(U,{round:"",dense:"",flat:"",icon:y(t).isFavorite(e.modelValue)?"mdi-star":"mdi-star-outline",onClick:r[0]||(r[0]=se(()=>y(t).toggleFavorite(e.modelValue),["prevent","stop"]))},null,8,["icon"]))}});const ge=["href"],be=["href"],he={class:"text-weight-medium"},Se={class:"text-weight-medium"},ye=B({__name:"ServerPresets",props:{modelValue:{type:Object,required:!0}},setup(e){const t=ue(),l=d(()=>t.preset);return(r,o)=>(n(),i(_e,{bordered:"",separator:"",style:{"max-height":"800px"},items:e.modelValue},{default:s(({item:a})=>[(n(),i(j,{key:a.id,active:l.value.type===a.type&&l.value.id===a.id,clickable:"","active-class":"bg-blue-grey-2",onClick:()=>y(t).switchToServerPreset(a)},{default:s(()=>[v(S,{class:"favorite-column"},{default:s(()=>[v(pe,{"model-value":a},null,8,["model-value"])]),_:2},1024),v(S,{class:"description-column"},{default:s(()=>[a.type==="MY_MARSHALL_COM"?(n(),i(m,{key:0},{default:s(()=>[_("a",{href:`https://my.marshall.com/presets/details/${a.id}`,target:"_blank",class:"text-weight-medium"},p(a.name),9,ge)]),_:2},1024)):g("",!0),a.type==="MARSHALL_CODE_TOOLS"?(n(),i(m,{key:1},{default:s(()=>[_("a",{href:`https://marshallcode.tools/${a.url}`,target:"_blank",class:"text-weight-medium"},p(a.track),9,be)]),_:2},1024)):g("",!0),a.artist?(n(),i(m,{key:2},{default:s(()=>[M(" Artist: "),_("span",he,p(a.artist),1)]),_:2},1024)):g("",!0),a.type==="MY_MARSHALL_COM"&&a.track?(n(),i(m,{key:3},{default:s(()=>[M(" Track: "),_("span",Se,p(a.track),1)]),_:2},1024)):g("",!0)]),_:2},1024),v(S,null,{default:s(()=>[v(G,{"model-value":a.patch},null,8,["model-value"])]),_:2},1024)]),_:2},1032,["active","onClick"]))]),_:1},8,["items"]))}});var Ce=oe(ye,[["__scopeId","data-v-c2ac9450"]]);export{Ce as S,A as u};
